<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>BaluFlix – App Edition (Dark/Light)</title>
  <meta name="description" content="BaluFlix — your personal Netflix-style YouTube app (frontend-only)" />
  <style>
    /* Theme variables */
    :root{
      --bg: #000000;
      --surface: #0b0b0b;
      --muted-surface: #050505;
      --card-border: #1a1a1a;
      --text: #ffffff;
      --muted: #bbb;
      --accent: #e50914;
      --glow: rgba(229,9,20,0.12);
      --shadow: rgba(0,0,0,0.85);
      --scroll-thumb: #333;
      --header-bg: linear-gradient(180deg, rgba(0,0,0,0.9), rgba(0,0,0,0.2));
    }

    :root[data-theme="light"]{
      --bg: #f6f7f9;
      --surface: #ffffff;
      --muted-surface: #fafafa;
      --card-border: #e6e7ea;
      --text: #0b0b0b;
      --muted: #444;
      --accent: #d32f2f;
      --glow: rgba(211,47,47,0.12);
      --shadow: rgba(0,0,0,0.06);
      --scroll-thumb: #bbb;
      --header-bg: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.6));
    }

    /* Base */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
      -webkit-tap-highlight-color:transparent;
      padding-bottom:60px;
      transition:background .28s ease,color .28s ease;
    }

    /* Scrollbar thumb */
    ::-webkit-scrollbar{height:8px;width:8px}
    ::-webkit-scrollbar-thumb{background:var(--scroll-thumb);border-radius:999px}

    /* HEADER */
    .header{
      position:fixed;inset:0 0 auto 0;height:64px;
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 14px;
      background:var(--header-bg);
      z-index:30;
      border-bottom:1px solid rgba(255,255,255,0.03);
      transition:background .28s ease, border-color .28s ease;
      backdrop-filter: blur(6px);
    }
    .logo-text{font-weight:900;font-size:20px;color:var(--accent);letter-spacing:1px}
    .header-right{display:flex;gap:8px;align-items:center}
    .btn{border:none;border-radius:999px;padding:8px 12px;font-size:13px;cursor:pointer;background:transparent;color:var(--text);border:1px solid transparent;transition:transform .16s ease,box-shadow .16s ease,background .16s ease}
    .btn:active{transform:translateY(1px)}
    .btn-sign{background:var(--accent);color:#fff;border-color:transparent;box-shadow:0 6px 14px rgba(0,0,0,0.25)}
    .btn-admin{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}

    /* Theme toggle button specifics */
    #themeToggle{
      display:inline-flex;align-items:center;gap:8px;padding:8px 10px;
      background:transparent;border-radius:999px;border:1px solid rgba(255,255,255,0.04);
    }
    #themeIcon{width:18px;height:18px;display:inline-block;vertical-align:middle;filter:drop-shadow(0 2px 6px rgba(0,0,0,0.4))}

    /* HERO */
    .hero{
      margin-top:64px;height:36vh;min-height:220px;
      background:center/cover no-repeat;
      display:flex;align-items:flex-end;padding:16px;
      position:relative;overflow:hidden;border-bottom:1px solid rgba(255,255,255,0.02);
      transition:background .28s ease;
    }
    /* set hero image via inline style later to ensure color blend works in both themes */
    .hero::after{content:"";position:absolute;inset:0;background:linear-gradient(to top,var(--bg) 18%,transparent 60%);pointer-events:none}

    .hero-content{position:relative;z-index:2;max-width:720px}
    .hero-title{font-size:20px;font-weight:800;margin-bottom:6px;color:var(--text)}
    .hero-sub{font-size:13px;color:var(--muted)}

    /* MAIN */
    .main{max-width:1000px;margin:0 auto;padding:16px;padding-top:22px}
    .player-card{background:var(--surface);border-radius:12px;padding:10px;border:1px solid var(--card-border);box-shadow:0 18px 36px var(--shadow);margin-bottom:16px;transition:background .28s ease,border-color .28s ease,box-shadow .28s ease}
    .player-header{display:flex;justify-content:space-between;align-items:flex-end;gap:8px;flex-wrap:wrap}
    .player-meta-title{font-size:16px;font-weight:700;color:var(--text)}
    .player-meta-sub{font-size:12px;color:var(--muted)}
    .player-16x9{position:relative;padding-top:56.25%;border-radius:10px;overflow:hidden;margin-top:8px;background:#000}
    .player-16x9 iframe{position:absolute;inset:0;width:100%;height:100%;border:0;background:#000}

    /* ROW */
    .section-title{font-size:16px;margin:8px 0 10px;color:var(--text)}
    .slider-row{display:flex;gap:10px;overflow-x:auto;padding-bottom:8px}
    .slider-row::-webkit-scrollbar{height:7px}
    .card{min-width:140px;border-radius:10px;overflow:hidden;background:var(--surface);border:1px solid var(--card-border);cursor:pointer;transition:transform .16s ease,box-shadow .16s ease,border-color .16s ease}
    .card img{width:100%;height:160px;object-fit:cover;display:block}
    .card p{padding:8px 8px 10px;font-size:13px;color:var(--text)}
    .card:hover{transform:translateY(-6px);box-shadow:0 12px 22px rgba(0,0,0,0.20);border-color:var(--accent)}
    .card-current{border-color:var(--accent);box-shadow:0 0 18px var(--glow)}

    /* ADMIN OVERLAY */
    .admin-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.86);z-index:80;padding:16px}
    .admin-overlay.show{display:flex}
    .admin-panel{width:100%;max-width:980px;background:var(--muted-surface);border-radius:12px;border:1px solid var(--card-border);display:flex;gap:12px;overflow:hidden}
    .admin-left{flex:.9;padding:16px;border-right:1px solid var(--card-border);background:linear-gradient(circle at top,var(--muted-surface),var(--surface))}
    .admin-right{flex:1.1;padding:16px;display:flex;flex-direction:column}
    .admin-title{font-size:18px;font-weight:700;margin-bottom:8px;color:var(--text)}
    .admin-chip{display:inline-block;padding:4px 8px;border-radius:999px;background:var(--glow);border:1px solid rgba(229,9,20,0.25);font-size:12px;margin-bottom:8px}
    .admin-card{background:var(--surface);border-radius:10px;padding:12px;border:1px solid var(--card-border)}
    .admin-field input,.admin-field select,.admin-field textarea{background:var(--muted-surface);border:1px solid var(--card-border);padding:8px;border-radius:8px;color:var(--text);font-size:13px;outline:none}
    .admin-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:8px}
    .admin-msg{font-size:13px;margin-top:6px}
    .admin-msg.ok{color:#3ddc84}
    .admin-msg.err{color:#ff6b6b}
    .upload-list{margin-top:8px;max-height:220px;overflow:auto}
    .upload-item{padding:8px;border-radius:8px;background:var(--muted-surface);border:1px solid var(--card-border);margin-bottom:6px;font-size:13px}
    .admin-close{position:absolute;right:12px;top:12px;border:none;background:transparent;color:var(--text);font-size:20px;cursor:pointer}

    /* simple helpers */
    .muted{color:var(--muted);font-size:13px}
    .small{font-size:12px;color:var(--muted)}

    @media (max-width:720px){
      .hero{height:48vh}
      .card img{height:140px}
      .player-meta-title{font-size:15px}
      .main{padding:12px}
      .admin-panel{flex-direction:column}
      .admin-left{border-right:none;border-bottom:1px solid var(--card-border)}
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="logo-text">BALUFLIX</div>
    <div class="header-right">
      <button id="themeToggle" class="btn" title="Toggle theme">
        <svg id="themeIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="12" cy="12" r="5" fill="currentColor"></circle>
        </svg>
        <span id="themeLabel" style="font-size:13px;color:var(--text);">Dark</span>
      </button>
      <button class="btn btn-admin" id="openAdmin">Admin <span style="margin-left:8px;background:var(--accent);padding:2px 6px;border-radius:999px;font-size:11px;color:#fff">Only</span></button>
      <button class="btn btn-sign" id="signBtn">Sign In</button>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" id="hero" style="background-image: url('https://assets.nflxext.com/ffe/siteui/vlv3/5a7fbcfa-50f9-4fae-b45e-1fc8dcd9a316/e78146ee-7a15-4d06-b0f2-97913e0fada2/IN-en-20230612-popsignuptwoweeks-perspective_alpha_website_large.jpg')">
    <div class="hero-content">
      <div class="hero-title">Watch your own YouTube universe.</div>
      <div class="hero-sub">Dimsa, songs, shorts — all in one BaluFlix page.</div>
    </div>
  </section>

  <!-- MAIN -->
  <main class="main" id="appMain">
    <!-- PLAYER -->
    <section class="player-card">
      <div class="player-header">
        <div>
          <div class="player-meta-title" id="nowTitle">Gadaparai Dimsa</div>
          <div class="player-meta-sub">Now Playing • <span id="nowType">Song</span></div>
        </div>
      </div>
      <div class="player-16x9">
        <iframe id="mainPlayer" src="https://www.youtube.com/embed/zW4A32pDtZk" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
    </section>

    <!-- ROW -->
    <section>
      <h2 class="section-title">Trending on BaluFlix</h2>
      <div class="slider-row" id="videoRow">
        <!-- initial cards will be injected -->
      </div>
    </section>
  </main>

  <!-- ADMIN OVERLAY -->
  <div class="admin-overlay" id="adminOverlay" aria-hidden="true">
    <button class="admin-close" id="closeAdmin" aria-label="Close admin panel">✕</button>
    <div class="admin-panel" role="dialog" aria-modal="true" aria-label="Admin panel">
      <div class="admin-left">
        <div class="admin-title">BaluFlix Admin</div>
        <div class="admin-chip">Owner: Korra Balanna</div>
        <p class="muted">Upload songs & movies using YouTube links. This admin is frontend-only (demo). Data saved to browser storage (localStorage). For a server-backed setup, connect to a Node.js backend later.</p>

        <div style="margin-top:12px">
          <div class="small">Tips</div>
          <ul style="margin-left:14px;margin-top:6px; color:var(--muted); font-size:13px; line-height:1.5">
            <li>Use full YouTube URL or just the video ID.</li>
            <li>Thumbnail will auto fallback to YouTube if left empty.</li>
            <li>Uploads are stored in your browser (private to this device/browser).</li>
            <li>If you want cloud persistence later, I'll give Render/Mongo steps.</li>
          </ul>
        </div>
      </div>

      <div class="admin-right">
        <!-- Login -->
        <div class="admin-card" id="adminLoginCard">
          <h3>Admin Login</h3>
          <div class="admin-field">
            <label for="adminPass">Secret password</label>
            <input id="adminPass" type="password" placeholder="Enter password" />
          </div>
          <div class="admin-actions">
            <button class="btn" id="cancelLogin">Cancel</button>
            <button class="btn btn-sign" id="loginBtn">Enter Panel</button>
          </div>
          <div class="admin-msg" id="loginMsg"></div>
          <div class="small" style="margin-top:10px">Demo password: <code style="background:var(--bg);padding:2px 6px;border-radius:6px;color:var(--text)">baluflix123</code></div>
        </div>

        <!-- Dashboard -->
        <div class="admin-card" id="adminDashCard" style="display:none">
          <h3>Upload New Video</h3>

          <form id="uploadForm">
            <div class="admin-field">
              <label for="upTitle">Title</label>
              <input id="upTitle" type="text" required placeholder="Video title" />
            </div>

            <div class="admin-field">
              <label for="upUrl">YouTube URL or ID</label>
              <input id="upUrl" type="text" required placeholder="https://youtu.be/ or ID" />
            </div>

            <div class="admin-field">
              <label for="upType">Type</label>
              <select id="upType">
                <option>Song</option>
                <option>Movie</option>
                <option>Short</option>
              </select>
            </div>

            <div class="admin-field">
              <label for="upThumb">Thumbnail URL (optional)</label>
              <input id="upThumb" type="url" placeholder="https://img.youtube.com/vi/ID/hqdefault.jpg" />
            </div>

            <div style="display:flex;align-items:center;gap:8px;margin-top:6px">
              <input id="upPublish" type="checkbox" checked />
              <label for="upPublish" class="small">Add to Trending now</label>
            </div>

            <div class="admin-actions" style="margin-top:12px">
              <button type="button" class="btn" id="logoutBtn">Logout</button>
              <button type="submit" class="btn btn-sign">Save Upload</button>
            </div>
          </form>

          <div class="admin-msg" id="uploadMsg"></div>

          <div style="margin-top:12px">
            <div class="small">Recent uploads (this browser):</div>
            <div class="upload-list" id="uploadList"></div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    /************************
     * BaluFlix App HTML-only
     * - frontend app version
     * - admin stores data in localStorage
     * - Dark / Light theme toggle added
     ************************/

    const ADMIN_PASSWORD = "baluflix123"; // demo only

    // Elements
    const adminOverlay = document.getElementById("adminOverlay");
    const openAdminBtn = document.getElementById("openAdmin");
    const closeAdminBtn = document.getElementById("closeAdmin");
    const loginBtn = document.getElementById("loginBtn");
    const cancelLoginBtn = document.getElementById("cancelLogin");
    const adminPassInput = document.getElementById("adminPass");
    const loginMsg = document.getElementById("loginMsg");
    const adminLoginCard = document.getElementById("adminLoginCard");
    const adminDashCard = document.getElementById("adminDashCard");
    const logoutBtn = document.getElementById("logoutBtn");

    const uploadForm = document.getElementById("uploadForm");
    const upTitle = document.getElementById("upTitle");
    const upUrl = document.getElementById("upUrl");
    const upType = document.getElementById("upType");
    const upThumb = document.getElementById("upThumb");
    const upPublish = document.getElementById("upPublish");
    const uploadMsg = document.getElementById("uploadMsg");
    const uploadList = document.getElementById("uploadList");

    const videoRow = document.getElementById("videoRow");
    const mainPlayer = document.getElementById("mainPlayer");
    const nowTitleEl = document.getElementById("nowTitle");
    const nowTypeEl = document.getElementById("nowType");

    // THEME
    const THEME_KEY = "baluflix_theme_v1";
    const themeToggle = document.getElementById("themeToggle");
    const themeIcon = document.getElementById("themeIcon");
    const themeLabel = document.getElementById("themeLabel");

    // Storage key for videos
    const LS_KEY = "baluflix_videos_v1";

    // Helpers
    function uid() { return Date.now().toString(36) + Math.random().toString(36).slice(2,8); }

    function extractYoutubeId(urlOrId) {
      if(!urlOrId) return "";
      if(!urlOrId.includes("http") && !urlOrId.includes("youtu")) return urlOrId.trim();
      try {
        const u = new URL(urlOrId.trim());
        if(u.hostname.includes("youtu.be")) return u.pathname.slice(1);
        if(u.searchParams.get("v")) return u.searchParams.get("v");
        return u.pathname.split("/").filter(Boolean).pop();
      } catch (e) {
        return urlOrId.trim();
      }
    }

    function getStored() {
      try { const raw = localStorage.getItem(LS_KEY); if(!raw) return []; return JSON.parse(raw); } catch { return []; }
    }
    function saveStored(list) { localStorage.setItem(LS_KEY, JSON.stringify(list)); }

    // THEME: apply, toggle, persist
    function applyTheme(name){
      if(name === "light"){
        document.documentElement.setAttribute("data-theme","light");
        themeLabel.textContent = "Light";
        themeIcon.innerHTML = `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="5" fill="currentColor"/><g opacity="0.9"><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></g></svg>`;
      } else {
        document.documentElement.removeAttribute("data-theme");
        themeLabel.textContent = "Dark";
        themeIcon.innerHTML = `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/></svg>`;
      }
    }

    function initTheme(){
      const saved = localStorage.getItem(THEME_KEY);
      if(saved === "light"){ applyTheme("light"); }
      else if(saved === "dark"){ applyTheme("dark"); }
      else {
        // default: respect prefers-color-scheme
        const prefers = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
        applyTheme(prefers ? "light" : "dark");
      }
    }

    themeToggle.addEventListener("click", ()=>{
      const current = document.documentElement.getAttribute("data-theme") === "light" ? "light" : "dark";
      const next = current === "light" ? "dark" : "light";
      applyTheme(next);
      localStorage.setItem(THEME_KEY, next);
    });

    // RENDER cards
    function createCard(v) {
      const card = document.createElement("div");
      card.className = "card";
      card.dataset.id = v.id;
      card.dataset.title = v.title;
      card.dataset.type = v.type;

      const img = document.createElement("img");
      img.src = v.thumb || `https://img.youtube.com/vi/${v.id}/hqdefault.jpg`;
      img.alt = v.title;

      const p = document.createElement("p");
      p.textContent = v.title;

      card.appendChild(img);
      card.appendChild(p);

      card.addEventListener("click", () => { playVideo(v, card); });

      return card;
    }

    function renderAll() {
      const list = getStored();
      videoRow.innerHTML = "";
      if(list.length === 0){
        const samples = [
          {id:"zW4A32pDtZk",title:"Gadaparai Dimsa",type:"Song"},
          {id:"7PzaHv0ql8Q",title:"Christmas Musical",type:"Song"},
          {id:"6jRwn-HkmSU",title:"The Mind Forest",type:"Movie"}
        ];
        samples.forEach(s=> videoRow.appendChild(createCard(s)));
        playVideo(samples[0], videoRow.querySelector(".card"));
        return;
      }
      list.forEach(v=> videoRow.appendChild(createCard(v)));
      const first = videoRow.querySelector(".card");
      if(first){
        const listArr = getStored();
        playVideo(listArr[0], first);
      }
    }

    function playVideo(v, card){
      const id = v.id;
      const title = v.title || "Video";
      const type = v.type || "Video";
      mainPlayer.src = "https://www.youtube.com/embed/" + id + "?autoplay=1";
      nowTitleEl.textContent = title;
      nowTypeEl.textContent = type;
      document.querySelectorAll(".card").forEach(x=>x.classList.remove("card-current"));
      if(card) card.classList.add("card-current");
      window.scrollTo({top:0,behavior:"smooth"});
    }

    // Admin UI
    openAdminBtn.addEventListener("click", ()=> {
      adminOverlay.classList.add("show");
      adminPassInput.value = "";
      loginMsg.textContent = "";
      if(isLoggedIn()) showDashboard(); else showLogin();
      adminOverlay.setAttribute("aria-hidden","false");
    });
    closeAdminBtn.addEventListen<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>BaluFlix – App Edition (Dark/Light)</title>
  <meta name="description" content="BaluFlix — your personal Netflix-style YouTube app (frontend-only)" />
  <style>
    /* Theme variables */
    :root{
      --bg: #000000;
      --surface: #0b0b0b;
      --muted-surface: #050505;
      --card-border: #1a1a1a;
      --text: #ffffff;
      --muted: #bbb;
      --accent: #e50914;
      --glow: rgba(229,9,20,0.12);
      --shadow: rgba(0,0,0,0.85);
      --scroll-thumb: #333;
      --header-bg: linear-gradient(180deg, rgba(0,0,0,0.9), rgba(0,0,0,0.2));
    }

    :root[data-theme="light"]{
      --bg: #f6f7f9;
      --surface: #ffffff;
      --muted-surface: #fafafa;
      --card-border: #e6e7ea;
      --text: #0b0b0b;
      --muted: #444;
      --accent: #d32f2f;
      --glow: rgba(211,47,47,0.12);
      --shadow: rgba(0,0,0,0.06);
      --scroll-thumb: #bbb;
      --header-bg: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.6));
    }

    /* Base */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
      -webkit-tap-highlight-color:transparent;
      padding-bottom:60px;
      transition:background .28s ease,color .28s ease;
    }

    /* Scrollbar thumb */
    ::-webkit-scrollbar{height:8px;width:8px}
    ::-webkit-scrollbar-thumb{background:var(--scroll-thumb);border-radius:999px}

    /* HEADER */
    .header{
      position:fixed;inset:0 0 auto 0;height:64px;
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 14px;
      background:var(--header-bg);
      z-index:30;
      border-bottom:1px solid rgba(255,255,255,0.03);
      transition:background .28s ease, border-color .28s ease;
      backdrop-filter: blur(6px);
    }
    .logo-text{font-weight:900;font-size:20px;color:var(--accent);letter-spacing:1px}
    .header-right{display:flex;gap:8px;align-items:center}
    .btn{border:none;border-radius:999px;padding:8px 12px;font-size:13px;cursor:pointer;background:transparent;color:var(--text);border:1px solid transparent;transition:transform .16s ease,box-shadow .16s ease,background .16s ease}
    .btn:active{transform:translateY(1px)}
    .btn-sign{background:var(--accent);color:#fff;border-color:transparent;box-shadow:0 6px 14px rgba(0,0,0,0.25)}
    .btn-admin{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}

    /* Theme toggle button specifics */
    #themeToggle{
      display:inline-flex;align-items:center;gap:8px;padding:8px 10px;
      background:transparent;border-radius:999px;border:1px solid rgba(255,255,255,0.04);
    }
    #themeIcon{width:18px;height:18px;display:inline-block;vertical-align:middle;filter:drop-shadow(0 2px 6px rgba(0,0,0,0.4))}

    /* HERO */
    .hero{
      margin-top:64px;height:36vh;min-height:220px;
      background:center/cover no-repeat;
      display:flex;align-items:flex-end;padding:16px;
      position:relative;overflow:hidden;border-bottom:1px solid rgba(255,255,255,0.02);
      transition:background .28s ease;
    }
    /* set hero image via inline style later to ensure color blend works in both themes */
    .hero::after{content:"";position:absolute;inset:0;background:linear-gradient(to top,var(--bg) 18%,transparent 60%);pointer-events:none}

    .hero-content{position:relative;z-index:2;max-width:720px}
    .hero-title{font-size:20px;font-weight:800;margin-bottom:6px;color:var(--text)}
    .hero-sub{font-size:13px;color:var(--muted)}

    /* MAIN */
    .main{max-width:1000px;margin:0 auto;padding:16px;padding-top:22px}
    .player-card{background:var(--surface);border-radius:12px;padding:10px;border:1px solid var(--card-border);box-shadow:0 18px 36px var(--shadow);margin-bottom:16px;transition:background .28s ease,border-color .28s ease,box-shadow .28s ease}
    .player-header{display:flex;justify-content:space-between;align-items:flex-end;gap:8px;flex-wrap:wrap}
    .player-meta-title{font-size:16px;font-weight:700;color:var(--text)}
    .player-meta-sub{font-size:12px;color:var(--muted)}
    .player-16x9{position:relative;padding-top:56.25%;border-radius:10px;overflow:hidden;margin-top:8px;background:#000}
    .player-16x9 iframe{position:absolute;inset:0;width:100%;height:100%;border:0;background:#000}

    /* ROW */
    .section-title{font-size:16px;margin:8px 0 10px;color:var(--text)}
    .slider-row{display:flex;gap:10px;overflow-x:auto;padding-bottom:8px}
    .slider-row::-webkit-scrollbar{height:7px}
    .card{min-width:140px;border-radius:10px;overflow:hidden;background:var(--surface);border:1px solid var(--card-border);cursor:pointer;transition:transform .16s ease,box-shadow .16s ease,border-color .16s ease}
    .card img{width:100%;height:160px;object-fit:cover;display:block}
    .card p{padding:8px 8px 10px;font-size:13px;color:var(--text)}
    .card:hover{transform:translateY(-6px);box-shadow:0 12px 22px rgba(0,0,0,0.20);border-color:var(--accent)}
    .card-current{border-color:var(--accent);box-shadow:0 0 18px var(--glow)}

    /* ADMIN OVERLAY */
    .admin-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.86);z-index:80;padding:16px}
    .admin-overlay.show{display:flex}
    .admin-panel{width:100%;max-width:980px;background:var(--muted-surface);border-radius:12px;border:1px solid var(--card-border);display:flex;gap:12px;overflow:hidden}
    .admin-left{flex:.9;padding:16px;border-right:1px solid var(--card-border);background:linear-gradient(circle at top,var(--muted-surface),var(--surface))}
    .admin-right{flex:1.1;padding:16px;display:flex;flex-direction:column}
    .admin-title{font-size:18px;font-weight:700;margin-bottom:8px;color:var(--text)}
    .admin-chip{display:inline-block;padding:4px 8px;border-radius:999px;background:var(--glow);border:1px solid rgba(229,9,20,0.25);font-size:12px;margin-bottom:8px}
    .admin-card{background:var(--surface);border-radius:10px;padding:12px;border:1px solid var(--card-border)}
    .admin-field input,.admin-field select,.admin-field textarea{background:var(--muted-surface);border:1px solid var(--card-border);padding:8px;border-radius:8px;color:var(--text);font-size:13px;outline:none}
    .admin-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:8px}
    .admin-msg{font-size:13px;margin-top:6px}
    .admin-msg.ok{color:#3ddc84}
    .admin-msg.err{color:#ff6b6b}
    .upload-list{margin-top:8px;max-height:220px;overflow:auto}
    .upload-item{padding:8px;border-radius:8px;background:var(--muted-surface);border:1px solid var(--card-border);margin-bottom:6px;font-size:13px}
    .admin-close{position:absolute;right:12px;top:12px;border:none;background:transparent;color:var(--text);font-size:20px;cursor:pointer}

    /* simple helpers */
    .muted{color:var(--muted);font-size:13px}
    .small{font-size:12px;color:var(--muted)}

    @media (max-width:720px){
      .hero{height:48vh}
      .card img{height:140px}
      .player-meta-title{font-size:15px}
      .main{padding:12px}
      .admin-panel{flex-direction:column}
      .admin-left{border-right:none;border-bottom:1px solid var(--card-border)}
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="logo-text">BALUFLIX</div>
    <div class="header-right">
      <button id="themeToggle" class="btn" title="Toggle theme">
        <svg id="themeIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="12" cy="12" r="5" fill="currentColor"></circle>
        </svg>
        <span id="themeLabel" style="font-size:13px;color:var(--text);">Dark</span>
      </button>
      <button class="btn btn-admin" id="openAdmin">Admin <span style="margin-left:8px;background:var(--accent);padding:2px 6px;border-radius:999px;font-size:11px;color:#fff">Only</span></button>
      <button class="btn btn-sign" id="signBtn">Sign In</button>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" id="hero" style="background-image: url('https://assets.nflxext.com/ffe/siteui/vlv3/5a7fbcfa-50f9-4fae-b45e-1fc8dcd9a316/e78146ee-7a15-4d06-b0f2-97913e0fada2/IN-en-20230612-popsignuptwoweeks-perspective_alpha_website_large.jpg')">
    <div class="hero-content">
      <div class="hero-title">Watch your own YouTube universe.</div>
      <div class="hero-sub">Dimsa, songs, shorts — all in one BaluFlix page.</div>
    </div>
  </section>

  <!-- MAIN -->
  <main class="main" id="appMain">
    <!-- PLAYER -->
    <section class="player-card">
      <div class="player-header">
        <div>
          <div class="player-meta-title" id="nowTitle">Gadaparai Dimsa</div>
          <div class="player-meta-sub">Now Playing • <span id="nowType">Song</span></div>
        </div>
      </div>
      <div class="player-16x9">
        <iframe id="mainPlayer" src="https://www.youtube.com/embed/zW4A32pDtZk" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
    </section>

    <!-- ROW -->
    <section>
      <h2 class="section-title">Trending on BaluFlix</h2>
      <div class="slider-row" id="videoRow">
        <!-- initial cards will be injected -->
      </div>
    </section>
  </main>

  <!-- ADMIN OVERLAY -->
  <div class="admin-overlay" id="adminOverlay" aria-hidden="true">
    <button class="admin-close" id="closeAdmin" aria-label="Close admin panel">✕</button>
    <div class="admin-panel" role="dialog" aria-modal="true" aria-label="Admin panel">
      <div class="admin-left">
        <div class="admin-title">BaluFlix Admin</div>
        <div class="admin-chip">Owner: Korra Balanna</div>
        <p class="muted">Upload songs & movies using YouTube links. This admin is frontend-only (demo). Data saved to browser storage (localStorage). For a server-backed setup, connect to a Node.js backend later.</p>

        <div style="margin-top:12px">
          <div class="small">Tips</div>
          <ul style="margin-left:14px;margin-top:6px; color:var(--muted); font-size:13px; line-height:1.5">
            <li>Use full YouTube URL or just the video ID.</li>
            <li>Thumbnail will auto fallback to YouTube if left empty.</li>
            <li>Uploads are stored in your browser (private to this device/browser).</li>
            <li>If you want cloud persistence later, I'll give Render/Mongo steps.</li>
          </ul>
        </div>
      </div>

      <div class="admin-right">
        <!-- Login -->
        <div class="admin-card" id="adminLoginCard">
          <h3>Admin Login</h3>
          <div class="admin-field">
            <label for="adminPass">Secret password</label>
            <input id="adminPass" type="password" placeholder="Enter password" />
          </div>
          <div class="admin-actions">
            <button class="btn" id="cancelLogin">Cancel</button>
            <button class="btn btn-sign" id="loginBtn">Enter Panel</button>
          </div>
          <div class="admin-msg" id="loginMsg"></div>
          <div class="small" style="margin-top:10px">Demo password: <code style="background:var(--bg);padding:2px 6px;border-radius:6px;color:var(--text)">baluflix123</code></div>
        </div>

        <!-- Dashboard -->
        <div class="admin-card" id="adminDashCard" style="display:none">
          <h3>Upload New Video</h3>

          <form id="uploadForm">
            <div class="admin-field">
              <label for="upTitle">Title</label>
              <input id="upTitle" type="text" required placeholder="Video title" />
            </div>

            <div class="admin-field">
              <label for="upUrl">YouTube URL or ID</label>
              <input id="upUrl" type="text" required placeholder="https://youtu.be/ or ID" />
            </div>

            <div class="admin-field">
              <label for="upType">Type</label>
              <select id="upType">
                <option>Song</option>
                <option>Movie</option>
                <option>Short</option>
              </select>
            </div>

            <div class="admin-field">
              <label for="upThumb">Thumbnail URL (optional)</label>
              <input id="upThumb" type="url" placeholder="https://img.youtube.com/vi/ID/hqdefault.jpg" />
            </div>

            <div style="display:flex;align-items:center;gap:8px;margin-top:6px">
              <input id="upPublish" type="checkbox" checked />
              <label for="upPublish" class="small">Add to Trending now</label>
            </div>

            <div class="admin-actions" style="margin-top:12px">
              <button type="button" class="btn" id="logoutBtn">Logout</button>
              <button type="submit" class="btn btn-sign">Save Upload</button>
            </div>
          </form>

          <div class="admin-msg" id="uploadMsg"></div>

          <div style="margin-top:12px">
            <div class="small">Recent uploads (this browser):</div>
            <div class="upload-list" id="uploadList"></div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    /************************
     * BaluFlix App HTML-only
     * - frontend app version
     * - admin stores data in localStorage
     * - Dark / Light theme toggle added
     ************************/

    const ADMIN_PASSWORD = "baluflix123"; // demo only

    // Elements
    const adminOverlay = document.getElementById("adminOverlay");
    const openAdminBtn = document.getElementById("openAdmin");
    const closeAdminBtn = document.getElementById("closeAdmin");
    const loginBtn = document.getElementById("loginBtn");
    const cancelLoginBtn = document.getElementById("cancelLogin");
    const adminPassInput = document.getElementById("adminPass");
    const loginMsg = document.getElementById("loginMsg");
    const adminLoginCard = document.getElementById("adminLoginCard");
    const adminDashCard = document.getElementById("adminDashCard");
    const logoutBtn = document.getElementById("logoutBtn");

    const uploadForm = document.getElementById("uploadForm");
    const upTitle = document.getElementById("upTitle");
    const upUrl = document.getElementById("upUrl");
    const upType = document.getElementById("upType");
    const upThumb = document.getElementById("upThumb");
    const upPublish = document.getElementById("upPublish");
    const uploadMsg = document.getElementById("uploadMsg");
    const uploadList = document.getElementById("uploadList");

    const videoRow = document.getElementById("videoRow");
    const mainPlayer = document.getElementById("mainPlayer");
    const nowTitleEl = document.getElementById("nowTitle");
    const nowTypeEl = document.getElementById("nowType");

    // THEME
    const THEME_KEY = "baluflix_theme_v1";
    const themeToggle = document.getElementById("themeToggle");
    const themeIcon = document.getElementById("themeIcon");
    const themeLabel = document.getElementById("themeLabel");

    // Storage key for videos
    const LS_KEY = "baluflix_videos_v1";

    // Helpers
    function uid() { return Date.now().toString(36) + Math.random().toString(36).slice(2,8); }

    function extractYoutubeId(urlOrId) {
      if(!urlOrId) return "";
      if(!urlOrId.includes("http") && !urlOrId.includes("youtu")) return urlOrId.trim();
      try {
        const u = new URL(urlOrId.trim());
        if(u.hostname.includes("youtu.be")) return u.pathname.slice(1);
        if(u.searchParams.get("v")) return u.searchParams.get("v");
        return u.pathname.split("/").filter(Boolean).pop();
      } catch (e) {
        return urlOrId.trim();
      }
    }

    function getStored() {
      try { const raw = localStorage.getItem(LS_KEY); if(!raw) return []; return JSON.parse(raw); } catch { return []; }
    }
    function saveStored(list) { localStorage.setItem(LS_KEY, JSON.stringify(list)); }

    // THEME: apply, toggle, persist
    function applyTheme(name){
      if(name === "light"){
        document.documentElement.setAttribute("data-theme","light");
        themeLabel.textContent = "Light";
        themeIcon.innerHTML = `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="5" fill="currentColor"/><g opacity="0.9"><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></g></svg>`;
      } else {
        document.documentElement.removeAttribute("data-theme");
        themeLabel.textContent = "Dark";
        themeIcon.innerHTML = `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/></svg>`;
      }
    }

    function initTheme(){
      const saved = localStorage.getItem(THEME_KEY);
      if(saved === "light"){ applyTheme("light"); }
      else if(saved === "dark"){ applyTheme("dark"); }
      else {
        // default: respect prefers-color-scheme
        const prefers = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
        applyTheme(prefers ? "light" : "dark");
      }
    }

    themeToggle.addEventListener("click", ()=>{
      const current = document.documentElement.getAttribute("data-theme") === "light" ? "light" : "dark";
      const next = current === "light" ? "dark" : "light";
      applyTheme(next);
      localStorage.setItem(THEME_KEY, next);
    });

    // RENDER cards
    function createCard(v) {
      const card = document.createElement("div");
      card.className = "card";
      card.dataset.id = v.id;
      card.dataset.title = v.title;
      card.dataset.type = v.type;

      const img = document.createElement("img");
      img.src = v.thumb || `https://img.youtube.com/vi/${v.id}/hqdefault.jpg`;
      img.alt = v.title;

      const p = document.createElement("p");
      p.textContent = v.title;

      card.appendChild(img);
      card.appendChild(p);

      card.addEventListener("click", () => { playVideo(v, card); });

      return card;
    }

    function renderAll() {
      const list = getStored();
      videoRow.innerHTML = "";
      if(list.length === 0){
        const samples = [
          {id:"zW4A32pDtZk",title:"Gadaparai Dimsa",type:"Song"},
          {id:"7PzaHv0ql8Q",title:"Christmas Musical",type:"Song"},
          {id:"6jRwn-HkmSU",title:"The Mind Forest",type:"Movie"}
        ];
        samples.forEach(s=> videoRow.appendChild(createCard(s)));
        playVideo(samples[0], videoRow.querySelector(".card"));
        return;
      }
      list.forEach(v=> videoRow.appendChild(createCard(v)));
      const first = videoRow.querySelector(".card");
      if(first){
        const listArr = getStored();
        playVideo(listArr[0], first);
      }
    }

    function playVideo(v, card){
      const id = v.id;
      const title = v.title || "Video";
      const type = v.type || "Video";
      mainPlayer.src = "https://www.youtube.com/embed/" + id + "?autoplay=1";
      nowTitleEl.textContent = title;
      nowTypeEl.textContent = type;
      document.querySelectorAll(".card").forEach(x=>x.classList.remove("card-current"));
      if(card) card.classList.add("card-current");
      window.scrollTo({top:0,behavior:"smooth"});
    }

    // Admin UI
    openAdminBtn.addEventListener("click", ()=> {
      adminOverlay.classList.add("show");
      adminPassInput.value = "";
      loginMsg.textContent = "";
      if(isLoggedIn()) showDashboard(); else showLogin();
      adminOverlay.setAttribute("aria-hidden","false");
    });
    closeAdminBtn.addEventListen      color:#aaa;
    }

    /* PLAYER */
    .player-card{
      background:#111;
      border-radius:14px;
      padding:12px;
      border:1px solid #222;
      box-shadow:0 18px 40px rgba(0,0,0,0.9);
      margin-bottom:22px;
    }
    .player-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:8px;
    }
    .player-meta-title{
      font-size:18px;
      font-weight:600;
    }
    .player-meta-sub{
      font-size:12px;
      color:#bbb;
    }
    .player-16x9{
      position:relative;
      width:100%;
      padding-top:56.25%;
      border-radius:10px;
      overflow:hidden;
    }
    .player-16x9 iframe{
      position:absolute;inset:0;
      width:100%;height:100%;
      border:none;
    }

    /* ROW */
    .section-title{
      font-size:20px;
      margin:10px 2px;
    }
    .slider-row{
      display:flex;
      overflow-x:auto;
      gap:12px;
      padding-bottom:10px;
    }
    .slider-row::-webkit-scrollbar{height:6px;}
    .slider-row::-webkit-scrollbar-thumb{
      background:#333;border-radius:10px;
    }
    .card{
      min-width:150px;
      border-radius:10px;
      overflow:hidden;
      cursor:pointer;
      border:1px solid #222;
      background:#111;
      transition:transform .2s ease,box-shadow .2s ease,border-color .2s ease;
    }
    .card img{
      width:100%;height:200px;object-fit:cover;
      display:block;
    }
    .card p{
      padding:6px 8px 8px;
      font-size:13px;
    }
    .card:hover{
      transform:translateY(-4px) scale(1.03);
      box-shadow:0 12px 22px rgba(0,0,0,.85);
      border-color:#e50914;
    }
    .card-current{
      border-color:#e50914;
      box-shadow:0 0 18px rgba(229,9,20,.9);
    }

    /* ADMIN OVERLAY */
    .admin-overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.85);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:30;
      padding:16px;
    }
    .admin-overlay.show{
      display:flex;
    }
    .admin-panel{
      width:100%;
      max-width:960px;
      background:#050505;
      border-radius:18px;
      border:1px solid #333;
      box-shadow:0 20px 50px rgba(0,0,0,.9);
      overflow:hidden;
      display:flex;
      flex-direction:row;
      min-height:380px;
    }
    .admin-left{
      flex:0.9;
      padding:18px;
      border-right:1px solid #222;
      background:radial-gradient(circle at top,#1a1a1a 0,#050505 60%);
    }
    .admin-right{
      flex:1.3;
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .admin-title{
      font-size:18px;
      font-weight:600;
      margin-bottom:6px;
    }
    .admin-chip{
      display:inline-block;
      font-size:11px;
      padding:3px 8px;
      border-radius:999px;
      background:rgba(229,9,20,0.1);
      border:1px solid rgba(229,9,20,0.6);
      margin-bottom:10px;
    }
    .admin-stats{
      font-size:13px;
      color:#ccc;
      margin-bottom:10px;
    }
    .admin-mini{
      font-size:12px;
      color:#888;
    }

    .admin-close{
      position:absolute;
      top:14px;
      right:18px;
      border:none;
      background:rgba(255,255,255,0.06);
      color:#fff;
      width:28px;height:28px;
      border-radius:50%;
      cursor:pointer;
      font-size:16px;
    }
    .admin-close:hover{
      background:rgba(255,255,255,0.16);
    }

    /* LOGIN CARD */
    .admin-card{
      background:#111;
      border-radius:12px;
      padding:14px;
      border:1px solid #222;
      font-size:13px;
    }
    .admin-card h3{
      margin-bottom:8px;
      font-size:15px;
    }
    .admin-field{
      display:flex;
      flex-direction:column;
      margin-bottom:8px;
      gap:4px;
    }
    .admin-field label{
      font-size:12px;
      color:#ccc;
    }
    .admin-field input,
    .admin-field select{
      background:#050505;
      border:1px solid #333;
      border-radius:8px;
      padding:7px 9px;
      color:#fff;
      font-size:13px;
      outline:none;
    }
    .admin-field input:focus,
    .admin-field select:focus{
      border-color:#e50914;
    }
    .admin-actions{
      display:flex;
      justify-content:flex-end;
      gap:8px;
      margin-top:6px;
    }
    .admin-msg{
      margin-top:4px;
      font-size:12px;
    }
    .admin-msg.ok{color:#3ddc84;}
    .admin-msg.err{color:#ff6b6b;}

    .badge-list{
      font-size:12px;
      margin-top:6px;
      color:#aaa;
    }

    .upload-list{
      margin-top:8px;
      max-height:150px;
      overflow-y:auto;
      font-size:12px;
    }
    .upload-item{
      padding:6px 8px;
      border-radius:8px;
      background:#080808;
      border:1px solid #222;
      margin-bottom:4px;
    }
    .upload-item span{
      font-size:11px;
      color:#bbb;
    }

    @media (max-width:768px){
      .hero{
        height:35vh;
        max-height:220px;
      }
      .intro-title{font-size:20px;}
      .main{padding:12px 12px 32px;}
      .admin-panel{
        flex-direction:column;
      }
      .admin-left{
        border-right:none;
        border-bottom:1px solid #222;
      }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="logo-text">BALUFLIX</div>
    <div class="header-right">
      <button class="btn btn-admin" id="openAdmin">
        Admin
        <span>Only</span>
      </button>
      <button class="btn btn-sign">Sign In</button>
    </div>
  </header>

  <!-- HERO (logo image – optional, else blank) -->
  <section class="hero">
    <!-- PNG unte src="baluflix-hero.png" ani pettuko -->
    <img src="baluflix-hero.png" class="hero-img" alt="BALUFLIX" onerror="this.style.display='none'">
  </section>

  <!-- MAIN -->
  <main class="main">

    <!-- INTRO TEXT -->
    <section class="intro">
      <h2 class="intro-title">Watch your own YouTube universe.</h2>
      <p class="intro-sub">Dimsa, songs, shorts – all in one BaluFlix page.</p>
      <p class="intro-small">Click any thumbnail below to play. Admin can add new videos from the secret upload panel.</p>
    </section>

    <!-- PLAYER -->
    <section class="player-card">
      <div class="player-header">
        <div>
          <div class="player-meta-title" id="nowTitle">Loading…</div>
          <div class="player-meta-sub">
            Now Playing • <span id="nowType">Video</span>
          </div>
        </div>
      </div>
      <div class="player-16x9">
        <iframe
          id="mainPlayer"
          src=""
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
      </div>
    </section>

    <!-- ROW -->
    <section>
      <h2 class="section-title">Trending on BaluFlix</h2>
      <div class="slider-row" id="videoRow">
        <!-- Cards will be created by JS -->
      </div>
    </section>
  </main>

  <!-- ADMIN OVERLAY -->
  <div class="admin-overlay" id="adminOverlay">
    <button class="admin-close" id="closeAdmin">×</button>

    <div class="admin-panel">
      <!-- LEFT SIDE -->
      <div class="admin-left">
        <div class="admin-title">BaluFlix Admin</div>
        <div class="admin-chip">Owner: Korra Balanna</div>

        <p class="admin-stats">
          • Upload songs & movies with YouTube links.<br>
          • Only you (admin) should see this panel.<br>
          • Data is stored in videos.json on your server.
        </p>

        <p class="admin-mini">
          Tip: After uploading, your video appears in the “Trending” row.
          Later you can connect this app to Render / Railway with custom domain.
        </p>
      </div>

      <!-- RIGHT SIDE -->
      <div class="admin-right">

        <!-- LOGIN CARD -->
        <div class="admin-card" id="adminLoginCard">
          <h3>Admin Login</h3>
          <p style="font-size:12px;color:#aaa;margin-bottom:6px;">
            This area is only for you. Enter secret password to manage uploads.
          </p>

          <div class="admin-field">
            <label for="adminPass">Admin Password</label>
            <input type="password" id="adminPass" placeholder="Enter admin password" />
          </div>

          <div class="admin-actions">
            <button class="btn" id="cancelLogin">Cancel</button>
            <button class="btn btn-sign" id="loginBtn">Enter Panel</button>
          </div>

          <div class="admin-msg" id="loginMsg"></div>
          <div class="badge-list">
            Demo password: <code style="background:#000;padding:1px 4px;border-radius:4px;">baluflix123</code>
          </div>
        </div>

        <!-- DASHBOARD CARD -->
        <div class="admin-card" id="adminDashCard" style="display:none;">
          <h3>Upload New Video</h3>

          <form id="uploadForm">
            <div class="admin-field">
              <label for="upTitle">Title</label>
              <input type="text" id="upTitle" placeholder="Video title" required />
            </div>

            <div class="admin-field">
              <label for="upUrl">YouTube URL</label>
              <input type="url" id="upUrl" placeholder="https://youtu.be/..." required />
            </div>

            <div class="admin-field">
              <label for="upType">Type</label>
              <select id="upType">
                <option value="Song">Song</option>
                <option value="Movie">Movie</option>
              </select>
            </div>

            <div class="admin-field">
              <label for="upThumb">Thumbnail URL (optional)</label>
              <input type="url" id="upThumb" placeholder="https://img.youtube.com/vi/ID/hqdefault.jpg" />
            </div>

            <div class="admin-field" style="flex-direction:row;align-items:center;gap:6px;">
              <input type="checkbox" id="upPublish" checked style="width:auto;">
              <label for="upPublish" style="margin:0;">Add to Trending row now</label>
            </div>

            <div class="admin-actions">
              <button type="button" class="btn" id="logoutBtn">Logout</button>
              <button type="submit" class="btn btn-sign">Save Upload</button>
            </div>
          </form>

          <div class="admin-msg" id="uploadMsg"></div>

          <div class="badge-list">
            Recent uploads (this server):
          </div>
          <div class="upload-list" id="uploadList"></div>
        </div>

      </div>
    </div>
  </div>

  <script>
    // --------- PLAYER & CARDS ---------
    const player     = document.getElementById("mainPlayer");
    const nowTitleEl = document.getElementById("nowTitle");
    const nowTypeEl  = document.getElementById("nowType");
    const videoRow   = document.getElementById("videoRow");
    const uploadList = document.getElementById("uploadList");

    let cards = [];
    let currentVideoId = null;

    function setCurrentCard(card) {
      cards.forEach(c => c.classList.remove("card-current"));
      if (card) card.classList.add("card-current");
    }

    function playVideo(v, card) {
      currentVideoId = v.id;
      player.src = "https://www.youtube.com/embed/" + v.id + "?autoplay=1";
      nowTitleEl.textContent = v.title;
      nowTypeEl.textContent  = v.type || "Video";
      setCurrentCard(card);
    }

    function createCardFromVideo(v) {
      const card = document.createElement("div");
      card.className = "card";
      card.dataset.id = v.id;

      const img = document.createElement("img");
      img.src = v.thumb || `https://img.youtube.com/vi/${v.id}/hqdefault.jpg`;
      const p = document.createElement("p");
      p.textContent = v.title;

      card.appendChild(img);
      card.appendChild(p);

      card.addEventListener("click", () => playVideo(v, card));

      return card;
    }

    function addUploadToList(v){
      const item = document.createElement("div");
      item.className = "upload-item";
      item.innerHTML = `<strong>${v.title}</strong><br><span>${v.type} • ${v.id}</span>`;
      uploadList.prepend(item);
    }

    async function loadVideosFromServer() {
      try {
        const res = await fetch("/api/videos");
        const list = await res.json();

        videoRow.innerHTML = "";
        cards = [];

        if (!Array.isArray(list) || list.length === 0) {
          videoRow.innerHTML = "<p style='font-size:13px;color:#aaa;'>No videos yet. Open Admin → upload first video.</p>";
          nowTitleEl.textContent = "No videos";
          nowTypeEl.textContent = "-";
          return;
        }

        list.forEach(v => {
          const card = createCardFromVideo(v);
          videoRow.appendChild(card);
          cards.push(card);
          addUploadToList(v);
        });

        // first video as default
        playVideo(list[0], cards[0]);
      } catch (err) {
        console.error(err);
        videoRow.innerHTML = "<p style='font-size:13px;color:#ff6b6b;'>Failed to load videos from server.</p>";
      }
    }

    loadVideosFromServer();

    // --------- ADMIN PANEL ---------
    const ADMIN_PASSWORD = "baluflix123";

    const openAdminBtn  = document.getElementById("openAdmin");
    const adminOverlay  = document.getElementById("adminOverlay");
    const closeAdminBtn = document.getElementById("closeAdmin");
    const cancelLoginBtn= document.getElementById("cancelLogin");
    const loginBtn      = document.getElementById("loginBtn");
    const logoutBtn     = document.getElementById("logoutBtn");
    const adminPass     = document.getElementById("adminPass");
    const loginMsg      = document.getElementById("loginMsg");
    const loginCard     = document.getElementById("adminLoginCard");
    const dashCard      = document.getElementById("adminDashCard");
    const uploadForm    = document.getElementById("uploadForm");
    const uploadMsg     = document.getElementById("uploadMsg");

    let isAdmin = false;

    function openAdmin(){
      adminOverlay.classList.add("show");
      if(!isAdmin){
        loginCard.style.display = "block";
        dashCard.style.display  = "none";
      }else{
        loginCard.style.display = "none";
        dashCard.style.display  = "block";
      }
    }

    function closeAdmin(){
      adminOverlay.classList.remove("show");
    }

    openAdminBtn.addEventListener("click", openAdmin);
    closeAdminBtn.addEventListener("click", closeAdmin);
    cancelLoginBtn.addEventListener("click", closeAdmin);

    loginBtn.addEventListener("click", () => {
      const val = adminPass.value.trim();
      if(val === ADMIN_PASSWORD){
        isAdmin = true;
        loginMsg.textContent = "Admin mode enabled.";
        loginMsg.className = "admin-msg ok";
        setTimeout(()=>{
          loginCard.style.display = "none";
          dashCard.style.display  = "block";
          loginMsg.textContent = "";
          adminPass.value = "";
        }, 400);
      }else{
        loginMsg.textContent = "Wrong password. Try again.";
        loginMsg.className = "admin-msg err";
      }
    });

    logoutBtn.addEventListener("click", () => {
      isAdmin = false;
      dashCard.style.display  = "none";
      loginCard.style.display = "block";
    });

    // Upload form -> POST /api/videos
    uploadForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const title = document.getElementById("upTitle").value.trim();
      const url   = document.getElementById("upUrl").value.trim();
      const type  = document.getElementById("upType").value;
      const thumb = document.getElementById("upThumb").value.trim();
      const publish = document.getElementById("upPublish").checked;

      if(!title || !url){
        uploadMsg.textContent = "Title and URL are required.";
        uploadMsg.className = "admin-msg err";
        return;
      }

      try {
        const res = await fetch("/api/videos", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ title, url, type, thumb })
        });

        const data = await res.json();
        if(!data.ok){
          uploadMsg.textContent = data.msg || "Error saving video.";
          uploadMsg.className = "admin-msg err";
          return;
        }

        const v = data.video;
        uploadMsg.textContent = "Uploaded & saved.";
        uploadMsg.className = "admin-msg ok";

        addUploadToList(v);

        if (publish) {
          const card = createCardFromVideo(v);
          videoRow.prepend(card);
          cards = Array.from(document.querySelectorAll(".card"));
        }

        uploadForm.reset();
        document.getElementById("upPublish").checked = true;

        setTimeout(()=> uploadMsg.textContent = "", 2500);
      } catch(err) {
        console.error(err);
        uploadMsg.textContent = "Server error.";
        uploadMsg.className = "admin-msg err";
      }
    });

    // Close admin on ESC
    document.addEventListener("keydown", (e)=>{
      if(e.key === "Escape" && adminOverlay.classList.contains("show")){
        closeAdmin();
      }
    });
  </script>
<script>
// ---------- CONFIG ----------
const API_BASE = ""; // empty => same origin, or set to "https://your-service.onrender.com"

// ---------- RENDER HELPERS ----------
function el(tag, props={}, children=[]) {
  const e = document.createElement(tag);
  Object.entries(props).forEach(([k,v]) => {
    if(k === "class") e.className = v;
    else if(k === "text") e.textContent = v;
    else e.setAttribute(k, v);
  });
  children.forEach(c => e.appendChild(c));
  return e;
}

// Render video cards into the slider row
function renderVideos(videos) {
  const row = document.getElementById("videoRow");
  if(!row) return;
  row.innerHTML = "";
  videos.forEach(v=>{
    const card = el("div",{class:"card", "data-id": v.id, "data-title": v.title, "data-type": v.type});
    const img = el("img",{src: v.thumb || `https://img.youtube.com/vi/${v.id}/hqdefault.jpg`, alt: v.title});
    const p = el("p",{text: v.title});
    card.appendChild(img); card.appendChild(p);
    card.addEventListener("click", ()=> playVideo(v));
    row.appendChild(card);
  });
}

// Play selected video
function playVideo(video) {
  const player = document.getElementById("mainPlayer");
  if(!player) return;
  player.src = `https://www.youtube.com/embed/${video.id}?autoplay=1`;
  document.getElementById("nowTitle").textContent = video.title || "Now Playing";
  document.getElementById("nowType").textContent = video.type || "Video";
  // highlight
  document.querySelectorAll(".card").forEach(c=> c.classList.toggle("card-current", c.dataset.id === video.id));
  window.scrollTo({ top: 0, behavior: "smooth" });
}

// ---------- API CALLS ----------
async function fetchVideos() {
  try {
    const res = await fetch((API_BASE || "") + "/api/videos");
    const data = await res.json();
    if(data.ok) {
      renderVideos(data.videos || []);
    } else {
      console.error("API /videos error", data);
    }
  } catch (err) {
    console.error("Fetch videos failed", err);
  }
}

// Upload (Admin) — sends to backend POST /api/videos
async function uploadVideoToServer(payload, adminSecret) {
  try {
    const headers = { "Content-Type": "application/json" };
    if(adminSecret) headers["x-admin-secret"] = adminSecret;
    const res = await fetch((API_BASE || "") + "/api/videos", {
      method: "POST",
      headers,
      body: JSON.stringify(payload)
    });
    return await res.json();
  } catch(e) {
    return { ok:false, error: e.message };
  }
}

// ---------- Hook upload form (existing admin UI) ----------
document.addEventListener("DOMContentLoaded", () => {
  // initial load
  fetchVideos();

  // wire the admin upload form (if present)
  const uploadForm = document.getElementById("uploadForm");
  if(uploadForm) {
    uploadForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const title = document.getElementById("upTitle").value.trim();
      const url = document.getElementById("upUrl").value.trim();
      const type = document.getElementById("upType").value;
      const thumb = document.getElementById("upThumb").value.trim();

      if(!title || !url) {
        alert("Title and URL required");
        return;
      }

      // ask admin for secret (dev only). For production, use login/session.
      let adminSecret = null;
      if(prompt) {
        adminSecret = prompt("Enter admin secret (for upload) — leave blank if none:");
      }

      const payload = { title, url, type, thumb };

      const result = await uploadVideoToServer(payload, adminSecret);
      if(result.ok) {
        // prepend in UI
        fetchVideos(); // refresh list from server
        alert("Uploaded!");
        uploadForm.reset();
      } else {
        alert("Upload failed: " + (result.error || JSON.stringify(result)));
      }
    });
  }
});
</script>
</body>
</html>
